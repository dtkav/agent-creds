# Domain configuration for agent-creds proxy
# Copy this to domains.toml and customize for your setup.
# Run `make generate` after editing to regenerate certs and configs.

[ca]
common_name = "Agent-Creds Proxy CA"
days_valid = 3650

# === Static API Key Injection ===
# Injects API key from environment variable into Authorization header
[domains.stripe]
host = "api.stripe.com"
env_var = "STRIPE_API_KEY"
# header_name = "authorization"  # optional, defaults to "authorization"
# header_prefix = "Bearer "      # optional, defaults to "Bearer "

# === OAuth2 Token Refresh ===
# Refreshes access token using stored refresh token
# [domains.gmail]
# host = "gmail.googleapis.com"
# auth_type = "oauth2"
# env_var = "GMAIL_REFRESH_TOKEN"
# oauth2_client_id_var = "GMAIL_CLIENT_ID"
# oauth2_client_secret_var = "GMAIL_CLIENT_SECRET"
# oauth2_token_url = "https://oauth2.googleapis.com/token"

# === Passthrough (TLS termination only, no credential injection) ===
# Useful for domains that need to go through the proxy for DNS/TLS
# but handle their own authentication
# [domains.example_passthrough]
# host = "api.example.com"
# auth_type = "passthrough"

# === Internal Service ===
# Routes to internal service instead of external host
# [domains.authz]
# host = "authz.localhost"
# auth_type = "internal"
# internal_port = 8080
